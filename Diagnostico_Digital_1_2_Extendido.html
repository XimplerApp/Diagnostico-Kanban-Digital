
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Diagnóstico Digital 1.2 – Extendido con Respuestas Espejo Únicas</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; max-width: 1000px; }
    .question { margin-bottom: 30px; padding: 10px; background: #f9f9f9; border-left: 4px solid #003366; }
    h1, h2, h3 { color: #003366; }
    label { display: block; margin: 4px 0; }
    button { padding: 10px 20px; font-size: 1rem; margin-top: 20px; }
    .result { margin-top: 40px; padding: 20px; background: #eef; border: 1px solid #ccc; }
    canvas { margin-top: 30px; }
    .tool-description { margin-top: 15px; padding: 10px; background: #fff; border: 1px dashed #ccc; }
  </style>
</head>
<body>
  <h1>Diagnóstico Digital 1.2 – ¿Qué plataforma necesitas realmente?</h1>
  <p>Responde cómo trabajan hoy (fotografía actual) y cómo te gustaría trabajar (modelo deseado). El sistema recomendará la plataforma que mejor se ajusta a tu visión futura.</p>

  <form id="formularioDiagnostico"></form>
  <button onclick="calcularRecomendacion()">Calcular Recomendación</button>

  <div id="resultado" class="result"></div>
  <canvas id="graficaResultado" width="600" height="400"></canvas>

<script>
const herramientas = { Trello: 0, Asana: 0, Monday: 0, Ximpler: 0 };

const preguntas = [
  {
    texto: "¿Cómo se asignan tareas?",
    opciones: ["Por WhatsApp o verbal", "Por tarjetas sin contexto", "Con responsables en plataforma", "Con trazabilidad, contexto y rol"]
  },
  {
    texto: "¿Cómo se da seguimiento?",
    opciones: ["Se pregunta personalmente", "Revisando tarjetas", "En paneles o reportes", "Con alertas y validadores automáticos"]
  },
  {
    texto: "¿Cómo se visualiza el flujo?",
    opciones: ["No se visualiza", "Tablero básico", "Tablero por fases", "Tablero con foco, impacto y cuello de botella"]
  },
  {
    texto: "¿Quién cierra las tareas?",
    opciones: ["Nadie formalmente", "A veces el mismo", "El jefe valida", "Sistema exige validación de cierre"]
  },
  {
    texto: "¿Qué tan visibles son los objetivos?",
    opciones: ["No se conocen", "Se mencionan ocasionalmente", "Están visibles en proyecto", "Cada tarea está ligada a un objetivo"]
  },
  {
    texto: "¿Cómo priorizan tareas?",
    opciones: ["Por urgencia o gritos", "Por recordatorios individuales", "Por fechas visibles en panel", "Por impacto estratégico real"]
  },
  {
    texto: "¿Quién detecta estancamientos?",
    opciones: ["Nadie los detecta", "Alguien lo nota tarde", "El líder da seguimiento", "El sistema lo alerta automáticamente"]
  },
  {
    texto: "¿Qué tan frecuente quedan tareas sin cerrar?",
    opciones: ["Muy común", "Frecuente", "Ocasional", "Casi nunca, todo tiene trazabilidad"]
  },
  {
    texto: "¿Qué tan frecuente es el retrabajo?",
    opciones: ["Muy común", "Ocasional", "Raro", "Muy raro, todo está claro y trazado"]
  },
  {
    texto: "¿Dónde están las instrucciones?",
    opciones: ["En correos o mensajes", "En tarjetas sueltas", "En listas o documentos", "Dentro de la tarea con contexto"]
  },
  {
    texto: "¿Cómo se mide el avance?",
    opciones: ["No se mide", "Se reporta informalmente", "Por entregables visibles", "Por impacto y métricas automáticas"]
  },
  {
    texto: "¿Quién valida que esté completo?",
    opciones: ["Nadie valida", "Lo marca quien lo hizo", "El jefe revisa", "Sistema exige validación formal"]
  },
  {
    texto: "¿Qué tan automatizado está el trabajo?",
    opciones: ["Nada", "Poco con herramientas externas", "Flujos semiautomáticos", "Automatización integrada y simple"]
  },
  {
    texto: "¿Dónde gestionan tareas repetitivas?",
    opciones: ["Se repiten manualmente", "Se copian", "Se plantillan", "Se generan automáticamente"]
  },
  {
    texto: "¿Qué tan claro es el impacto de cada tarea?",
    opciones: ["No se entiende", "Depende del líder", "A veces se vincula a entregables", "Está claramente vinculado al resultado"]
  },
  {
    texto: "¿Cuántas tareas tiene cada persona abiertas?",
    opciones: ["No se sabe", "Solo si lo cuenta manualmente", "Aparece en tablero personal", "Está visible en tiempo real"]
  },
  {
    texto: "¿Se trabaja por urgencia o ritmo?",
    opciones: ["Urgencia constante", "Frecuente urgencia", "A veces", "Por ciclos claros y estables"]
  },
  {
    texto: "¿Cómo se asignan responsables?",
    opciones: ["Verbal o implícito", "Se anota el nombre", "Asignado en plataforma", "Asignado, validado y trazable"]
  },
  {
    texto: "¿Qué tanto se mide el resultado?",
    opciones: ["No se mide", "Se intuye", "Se cuantifica parcialmente", "Se mide por valor generado"]
  },
  {
    texto: "¿Qué tan transparente es la ejecución?",
    opciones: ["Solo el jefe sabe", "Se comunica en juntas", "Es visible para algunos", "Es visible para todos en tablero"]
  }
];

function renderPreguntas() {
  const form = document.getElementById("formularioDiagnostico");
  preguntas.forEach((p, i) => {
    const div = document.createElement("div");
    div.className = "question";
    div.innerHTML = `<h3>${i + 1}. ${p.texto}</h3><strong>A) ¿Cómo lo hacen hoy?</strong>`;
    p.opciones.forEach((op, j) => {
      div.innerHTML += `<label><input type="radio" name="q${i}a" value="${j}"> ${op}</label>`;
    });
    div.innerHTML += `<br><strong>B) ¿Cómo te gustaría hacerlo?</strong>`;
    p.opciones.forEach((op, j) => {
      div.innerHTML += `<label><input type="radio" name="q${i}b" value="${j}"> ${op}</label>`;
    });
    form.appendChild(div);
  });
}

function calcularRecomendacion() {
  const puntajes = { Trello: 0, Asana: 0, Monday: 0, Ximpler: 0 };

  preguntas.forEach((_, i) => {
    const val = document.querySelector(`input[name='q${i}b']:checked`);
    if (val) {
      const idx = parseInt(val.value);
      if (idx === 0) puntajes.Trello += 1;
      else if (idx === 1) puntajes.Asana += 1;
      else if (idx === 2) { puntajes.Monday += 1; puntajes.Ximpler += 0.5; }
      else if (idx === 3) puntajes.Ximpler += 1;
    }
  });

  const maxTool = Object.entries(puntajes).reduce((a, b) => b[1] >= a[1] ? b : a)[0];

  const resultado = document.getElementById("resultado");
  resultado.innerHTML = `<h2>Herramienta Recomendada: ${maxTool}</h2>
  <div class='tool-description'>
    <p><strong>Ximpler.App:</strong> Plataforma de trazabilidad y productividad enfocada en monetizar el tiempo institucional mal usado.</p>
    <p><strong>Monday:</strong> Plataforma visual robusta con automatización si ya tienes procesos claros.</p>
    <p><strong>Asana:</strong> Herramienta ligera y funcional si necesitas simplicidad.</p>
    <p><strong>Trello:</strong> Ideal para flujos simples o personales, sin trazabilidad profunda.</p>
  </div>`;

  const ctx = document.getElementById("graficaResultado").getContext("2d");
  new Chart(ctx, {
    type: "bar",
    data: {
      labels: Object.keys(puntajes),
      datasets: [{
        label: "Compatibilidad según tu visión futura",
        data: Object.values(puntajes),
        backgroundColor: ['#bbb', '#f90', '#09f', '#2c7']
      }]
    },
    options: { responsive: true, scales: { y: { beginAtZero: true } } }
  });
}

window.onload = renderPreguntas;
</script>
</body>
</html>
